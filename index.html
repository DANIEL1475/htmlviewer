<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Loader</title>
  <style>
    body {font-family: sans-serif; padding: 2rem;}
    #viewer {width: 100%; min-height: 90vh; border: none;}
  </style>
</head>
<body>
  <h2>Loading ...</h2>
  <div id="viewer"></div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const fileUrl = params.get('file');

    if (fileUrl) {
      document.querySelector('h2').textContent = 'Showing file: ' + fileUrl;

      fetch(fileUrl)
        .then(r => r.json())
        .then(data => {
          document.getElementById('viewer').innerHTML = data.content;
        })
        .catch(err => {
          console.error(err);
          document.querySelector('h2').textContent = 'Error';
        });

    } else {
      document.querySelector('h2').textContent = 'Set ?file= parameter';
    }
  </script>
</body>
</html>
